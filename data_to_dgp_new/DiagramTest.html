{{ block styles }}
<style>
    .otree-body {
        font: 14px helvetica neue, helvetica, arial, sans-serif;
    }

    #cy {
        margin-left: auto;
        margin-right: auto;
        width: 400px;
        height: 200px;
        display: block;
    }

    #cy2 {
        margin-left: auto;
        margin-right: auto;
        width: 400px;
        height: 200px;
        display: block;
    }

    #info {
        color: #c88;
        font-size: 2em;
        width: 800px;
        height: 200px;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }
</style>
{{ endblock }}

{{ block title }}
<dl class="lng-DTestTitle" style="text-align:center">You accuracy in last round:</dl>
{{ endblock }}

{{ block content }}

<script>
    let right_answers_list = js_vars.right_answers_list;
    let player_answers = js_vars.player_answers;
</script>

<div class="lang-container" style="text-align:right">
    <table>
        <col width="88%">
        <col width="12%">
        <tr>
            <td></td>
            <td style="border-radius: 8px; border: 1px solid #000; display: block; height: 34px">
                <link rel="stylesheet"
                      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"/>
                <span class="material-symbols-outlined" style="position: relative; top: 3px;">language</span>
                <select class="change-lang" style="border: 1px solid white; position: relative; bottom: 3px;">
                    <option value="en">Eng</option>
                    <option value="ge">Ger</option>
                    <option value="ru">Rus</option>
                </select>
            </td>
        </tr>
    </table>
</div>

<br>
<div>
    <h5 class="lng-DTestText1">That what was chosen:</h5>

    <br/>
</div>
<div id="cy" hidden="hidden"></div>

<div class="card">
    <table class="table table-striped">
        <thead style="background-color: #dddddd">
        <tr class="header">
            <th class="lng-Whatcanttobe" colspan="2" style="text-align: center">What can not to be</th>
            <th class="lng-Youranswers" colspan="2" style="text-align: center">Your answers</th>
            <th class="lng-Rightanswers" colspan="2" style="text-align: center">Right answers</th>
        </tr>
        </thead>

        <tbody>
        <tr class="header" style="background-color: #dddddd; border-color: #111111">
            <th class="lng-Scheme" style="text-align: center">Scheme</th>
            <th class="lng-Description" style="text-align: center">Description</th>
            <th class="lng-Cantbe" style="text-align: right; font-weight: normal">Can <u>not be</u></th>
            <th class="lng-Cantexclude" style="text-align: center; font-weight: normal">Can <u>not exclude</u></th>
            <th class="lng-Cantbe2" style="text-align: right; font-weight: normal; font-size:120%">Can not be</th>
            <th class="lng-Cantexclude2" style="text-align: center; font-weight: normal; font-size:120%">Can not exclude</th>
        </tr>
        <tr>
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/1.svg" width="150" height="85"></th>
            <th class="lng-XsYw" style="font-weight: normal; text-align: center; font-size:125%"><br>X - сильное, Y - слабое</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html1" id="html1" name="topic1" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html12" id="html12" name="topic1" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html1_right" id="html1_right" name="topic1_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html12_right" id="html12_right" name="topic1_right" disabled/></th>
        </tr>
        <tr>
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/2.svg" width="150" height="85"></th>
            <th class="lng-XwYs" style="font-weight: normal; text-align: center; font-size:125%"><br>X - слабое, Y - сильное</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html2" id="html2" name="topic2" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html22" id="html22" name="topic2" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html2_right" id="html2_right" name="topic2_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html22_right" id="html22_right" name="topic2_right" disabled/></th>
        </tr>
        <tr style="border-color: #111111">
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/3.svg" width="150" height="85"></th>
            <th class="lng-XYid" style="font-weight: normal; text-align: center; font-size:125%"><br>X и Y нейтральные относительно друг друга</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html3" id="html3" name="topic3" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html32" id="html32" name="topic3" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html3_right" id="html3_right" name="topic3_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html32_right" id="html32_right" name="topic3_right" disabled/></th>
        </tr>
        <tr>
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/4.svg" width="150" height="85"></th>
            <th class="lng-XsZw" style="font-weight: normal; text-align: center; font-size:125%"><br>X - сильное, Z - слабое</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html4" id="html4" name="topic4" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html42" id="html42" name="topic4" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html4_right" id="html4_right" name="topic4_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html42_right" id="html42_right" name="topic4_right" disabled/></th>
        </tr>
        <tr>
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/5.svg" width="150" height="85"></th>
            <th class="lng-XwZs" style="font-weight: normal; text-align: center; font-size:125%"><br>X - слабое, Z - сильное</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html5" id="html5" name="topic5" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html52" id="html52" name="topic5" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html5_right" id="html5_right" name="topic5_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html52_right" id="html52_right" name="topic5_right" disabled/></th>
        </tr>
        <tr style="border-color: #111111">
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/6.svg" width="150" height="85"></th>
            <th class="lng-XZid" style="font-weight: normal; text-align: center; font-size:125%"><br>X и Z нейтральные относительно друг друга</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html6" id="html6" name="topic6" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html62" id="html62" name="topic6" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html6_right" id="html6_right" name="topic6_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html62_right" id="html62_right" name="topic6_right" disabled/></th>
        </tr>
        <tr>
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/7.svg" width="150" height="85"></th>
            <th class="lng-YsZw" style="font-weight: normal; text-align: center; font-size:125%"><br>Y - сильное, Z - слабое</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html7" id="html7" name="topic7" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html72" id="html72" name="topic7" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html7_right" id="html7_right" name="topic7_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html72_right" id="html72_right" name="topic7_right" disabled/></th>
        </tr>
        <tr>
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/8.svg" width="150" height="85"></th>
            <th class="lng-YwZs" style="font-weight: normal; text-align: center; font-size:125%"><br>Y - слабое, Z - сильное</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html8" id="html8" name="topic8" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html82" id="html82" name="topic8" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html8_right" id="html8_right" name="topic8_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html82_right" id="html82_right" name="topic8_right" disabled/></th>
        </tr>
        <tr>
            <th><img src="https://raw.githubusercontent.com/just-yagodkin/GitStorage/9617c5d359069976bfbbb30fe171ec203c979e7b/9.svg" width="150" height="85"></th>
            <th class="lng-YZid" style="font-weight: normal; text-align: center; font-size:125%"><br>Y и Z нейтральные относительно друг друга</th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html9" id="html9" name="topic9" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html92" id="html92" name="topic9" disabled/></th>
            <th style="text-align: right; font-size:175%"><input type="radio" value="html9_right" id="html9_right" name="topic9_right" disabled/></th>
            <th style="text-align: center; font-size:175%"><input type="radio" value="html92_right" id="html92_right" name="topic9_right" disabled/></th>
        </tr>
        </tbody>
    </table>
</div>

<br/>
<h5 class="lng-DTestText2">These dependencies are underlying the basis of the data:</h5>

<br/>
<div id="cy2"></div>

<br>
<table style="margin:auto">
    <tr>
        <td>
            <h5 class="lng-Accuracy" style="text-align:right">
                Results of previous round:</h5>
        </td>
        <td>
            <h5 style="text-align:left"><b>&nbsp;{{accuracy}}</b></h5>
        </td>

    </tr>
</table>

<table style="margin:auto">
    <tr>
        <td>
            <h5 class="lng-Prize1" style="text-align:right">
                Tokens You've got for correspondence of your confidence and task accuracy:</h5>
        </td>
        <td>
            <h5 style="text-align:left"><b>{{payoff_for_score}}</b></h5>
        </td>
    </tr>
    <tr>
        <td>
            <h5 class="lng-Prize2" style="text-align:right">
                Tokens You've got for accuracy in task:</h5>
        </td>
        <td>
            <h5 style="text-align:left"><b>{{payoff_for_accuracy}}</b></h5>
        </td>
    </tr>
</table>
<br>

{{ next_button }}


<script src="{{ static 'global/cytoscape.min.js' }}"></script>

<script src="{{ static  'data_to_dgp/lang.js'  }}"></script>

<script src="{{ static  'data_to_dgp/utils.js'  }}"></script>


<script>
    let array_edge = [];
    var myStringArray = js_vars.edges;
    var arrayLength = myStringArray.length;
    for (var i = 0; i < arrayLength; i++) {

        // console.log(myStringArray[i]);

        if (myStringArray[i].counter == 1) array_edge.push({data: myStringArray[i]});
    }

    var cy = cytoscape({
        container: document.getElementById('cy'),

        boxSelectionEnabled: false,
        autounselectify: true,
        wheelSensitivity: 0.01,

        style: cytoscape.stylesheet()

            .selector('node')
            .css({
                'content': 'data(name)',
                'text-valign': 'center',
                'color': 'black',
                // 'text-outline-width': 2,
                // 'text-outline-color': undefined,
                'background-color': '#666'
            })
            .selector(':selected')
            .css({
                'background-color': 'black',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'text-outline-color': 'black'
            })
            .selector('edge')
            .css({
                'width': 2,
                'line-color': '#ccc',
                'target-arrow-color': 'black',
                'target-arrow-shape': 'triangle',
                'curve-style': 'bezier',
                'line-style': 'solid'
            })
            .selector('edge[label]')
            .css({
                "label": "data(label)",
                "width": 3
            })
            .selector('layout')
            .css({
                'name': 'circle',
                'rows': 3,
                'cols': 2,
                'padding': 10,
            })
        ,

        elements: {
            nodes: js_vars.nodes,
            edges: array_edge
        },
    });


    var layout = cy.layout({
        name: 'circle'
    });
    layout.run();

    elements_revised = {}

    if (js_vars.show_edges_template == 1) {
        elements_revised = {
            nodes: js_vars.nodes,
            edges: js_vars.edges_original
        }
    } else {
        elements_revised = {
            nodes: js_vars.nodes
        };
    }

    var cy2 = cytoscape({
        container: document.getElementById('cy2'),

        boxSelectionEnabled: false,
        autounselectify: true,
        wheelSensitivity: 0.01,

        style: cytoscape.stylesheet()


            .selector('node')
            .css({
                'content': 'data(name)',
                'text-valign': 'center',
                'color': 'black',
                // 'text-outline-width': 2,
                // 'text-outline-color': undefined,
                'background-color': '#666'
            })
            .selector(':selected')
            .css({
                'background-color': 'black',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'text-outline-color': 'black'
            })
            .selector('edge')
            .css({
                'width': 2,
                'line-color': '#ccc',
                'target-arrow-color': 'black',
                'target-arrow-shape': 'triangle',
                'curve-style': 'bezier',
                'line-style': 'solid'
            })
            .selector('edge[label]')
            .css({
                "label": "data(label)",
                "width": 3
            })
            .selector('layout')
            .css({
                'name': 'circle',
                'rows': 3,
                'cols': 2,
                'padding': 10,
            })
        ,


        elements: elements_revised,

    });


    var layout2 = cy2.layout({
        name: 'circle'
    });
    layout2.run();
    // edges: [
    //       { data: {counter:0, weight:0, id: 'XY', source: 'X', target: 'Y', label: ""} },
    //       { data: {counter:0, weight:0, id: 'YX', source: 'Y', target: 'X', label: ""} },
    //       { data: {counter:0, weight:0, id: 'YZ', source: 'Y', target: 'Z' , label: ""} },
    //       { data: {counter:0, weight:0, id: 'XZ', source: 'X', target: 'Z' , label: ""} },
    //       { data: {counter:0, weight:0, id: 'ZY', source: 'Z', target: 'Y' , label: ""} },
    //       { data: {counter:0, weight:0, id: 'ZX', source: 'Z', target: 'X' , label: ""} },
    //       // { data: {counter:0, weight:0, id: 'bc', source: 'P', target: 'S', label: ""} },
    //     ]
    //   },

</script>

<script>

    console.log(typeof right_answers_list)

    p_ans_1 = document.getElementById("html1")
    p_ans_2 = document.getElementById("html2")
    p_ans_3 = document.getElementById("html3")
    p_ans_4 = document.getElementById("html4")
    p_ans_5 = document.getElementById("html5")
    p_ans_6 = document.getElementById("html6")
    p_ans_7 = document.getElementById("html7")
    p_ans_8 = document.getElementById("html8")
    p_ans_9 = document.getElementById("html9")
    p_ans_12 = document.getElementById("html12")
    p_ans_22 = document.getElementById("html22")
    p_ans_32 = document.getElementById("html32")
    p_ans_42 = document.getElementById("html42")
    p_ans_52 = document.getElementById("html52")
    p_ans_62 = document.getElementById("html62")
    p_ans_72 = document.getElementById("html72")
    p_ans_82 = document.getElementById("html82")
    p_ans_92 = document.getElementById("html92")

    ans_1 = document.getElementById("html1_right")
    ans_2 = document.getElementById("html2_right")
    ans_3 = document.getElementById("html3_right")
    ans_4 = document.getElementById("html4_right")
    ans_5 = document.getElementById("html5_right")
    ans_6 = document.getElementById("html6_right")
    ans_7 = document.getElementById("html7_right")
    ans_8 = document.getElementById("html8_right")
    ans_9 = document.getElementById("html9_right")




    p_ans_1.checked = Boolean(parseInt(player_answers[0]));
    p_ans_2.checked = Boolean(parseInt(player_answers[1]));
    p_ans_3.checked = Boolean(parseInt(player_answers[2]));
    p_ans_4.checked = Boolean(parseInt(player_answers[3]));
    p_ans_5.checked = Boolean(parseInt(player_answers[4]));
    p_ans_6.checked = Boolean(parseInt(player_answers[5]));
    p_ans_7.checked = Boolean(parseInt(player_answers[6]));
    p_ans_8.checked = Boolean(parseInt(player_answers[7]));
    p_ans_9.checked = Boolean(parseInt(player_answers[8]));
    p_ans_12.checked = !Boolean(parseInt(player_answers[0]));
    p_ans_22.checked = !Boolean(parseInt(player_answers[1]));
    p_ans_32.checked = !Boolean(parseInt(player_answers[2]));
    p_ans_42.checked = !Boolean(parseInt(player_answers[3]));
    p_ans_52.checked = !Boolean(parseInt(player_answers[4]));
    p_ans_62.checked = !Boolean(parseInt(player_answers[5]));
    p_ans_72.checked = !Boolean(parseInt(player_answers[6]));
    p_ans_82.checked = !Boolean(parseInt(player_answers[7]));
    p_ans_92.checked = !Boolean(parseInt(player_answers[8]));

    console.log(p_ans_1.checked)
    console.log(p_ans_2.checked)
    console.log(p_ans_3.checked)
    console.log(p_ans_4.checked)
    console.log(p_ans_5.checked)
    console.log(p_ans_6.checked)
    console.log(p_ans_7.checked)
    console.log(p_ans_8.checked)
    console.log(p_ans_9.checked)

    ans_1.checked = Boolean(parseInt(right_answers_list[0]));
    ans_2.checked = Boolean(parseInt(right_answers_list[1]));
    ans_3.checked = Boolean(parseInt(right_answers_list[2]));
    ans_4.checked = Boolean(parseInt(right_answers_list[3]));
    ans_5.checked = Boolean(parseInt(right_answers_list[4]));
    ans_6.checked = Boolean(parseInt(right_answers_list[5]));
    ans_7.checked = Boolean(parseInt(right_answers_list[6]));
    ans_8.checked = Boolean(parseInt(right_answers_list[7]));
    ans_9.checked = Boolean(parseInt(right_answers_list[8]));

    document.getElementById("html12_right").checked = !ans_1.checked
    document.getElementById("html22_right").checked = !ans_2.checked
    document.getElementById("html32_right").checked = !ans_3.checked
    document.getElementById("html42_right").checked = !ans_4.checked
    document.getElementById("html52_right").checked = !ans_5.checked
    document.getElementById("html62_right").checked = !ans_6.checked
    document.getElementById("html72_right").checked = !ans_7.checked
    document.getElementById("html82_right").checked = !ans_8.checked
    document.getElementById("html92_right").checked = !ans_9.checked

    console.log(typeof right_answers_list[0])



</script>

<div class="d-grid gap-2 col-6 mx-auto">
    <a class="btn btn-outline-secondary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
        SHOW INSTRUCTIONS
      </a>
    </div>
      <div class="collapse" id="collapseExample">
        <div id = "presentation" style="text-align: center">
            <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQfpoIUoXDowaEcC6CMAdC47D0FIHAROL9VAEuM55wTIt00YLXAiStHxL6C2j1aEBJdndxuwwzjw55R/embed?start=false&loop=true&delayms=60000" frameborder="0" width="720" height="441" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
        </div>
      </div>

<script>
    if (window.location.hash == '#en'){
        document.getElementById("presentation").innerHTML = '<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQuckfWy0p_GyPx5ENCW_-EN226UAqVcbrxA7GxTxjmhtZ-itGAz1PSgeqSDQgfyiWP-fovuntr5WxN/embed?start=false&loop=true&delayms=60000" frameBorder="0" width="720" height="441" allowFullScreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>'
    }
    else if(window.location.hash == '#ru'){
        document.getElementById("presentation").innerHTML = '<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQuRy8R1oYvUeHeUNeBG1QkilrLQhry6MP8cgEnshJoEc9-y8CU3fjaBbnBoL4RIusxQQ1n2H55bWCN/embed?start=false&loop=false&delayms=6000" frameborder="0" width="720" height="441" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>'
    }
    console.log(window.location.hash)
</script>

{{ endblock }}
